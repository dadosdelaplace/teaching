---
title: "Descripción y exploración de datos"
subtitle: "(diapositivas realizadas en R con el paquete xaringan)"
author: "⚔</br>Javier Álvarez Liébana"
institute: "Universidad Complutense de Madrid"
date: "Curso 2021-2022 (actualizado: `r as.character(format(Sys.Date(), '%d-%m-%Y'))`)"
output:
  xaringan::moon_reader:
    self_contained: true
    css: ["default", "css/styles.css", "css/fonts.css"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
      beforeInit: "https://platform.twitter.com/widgets.js"
---

```{r settings, echo = FALSE, message = FALSE}
options(htmltools.dir.version = TRUE)
library(knitr)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.showtext = T, fig.retina = 1)
library(tidyverse)
library(fontawesome)
library(glue)
library(xaringanExtra)

use_xaringan_extra(c("tile_view", "animate_css", "tachyons"))
use_tile_view() # panel
# xaringanExtra::use_scribble() # scribble
use_extra_styles(hover_code_line = TRUE,
                 mute_unhighlighted_code = FALSE) # Hover triangle code line
use_clipboard( # About clipboard
  button_text = "Click para copiar código",
  success_text = "Código copiado",
  error_text = "Ctrl+C para copiar"
)
use_freezeframe() # restarting gifs
use_animate_all("fade") # animates
use_panelset() # panels 
```

class: inverse, center, middle

# PRESENTACIÓN DE LA <br> .fat[ASIGNATURA]

&nbsp;  

&nbsp;  

&nbsp; 

&nbsp;

.left[.salt[Pulsa <kbd-white>O</kbd-white> para ver el panel de diapositivas]]
.left[.salt[Pulsa <kbd-white>H</kbd-white> para ver otros atajos]]

---

.right[Clase 1/28]
# Me presento

**[Javier Álvarez Liébana](http://twitter.com/dadosdelaplace)**, nacido en un año indeterminado en **Carabanchel** (Madrid).

<img src = "img/me.jpeg" width = "30%" align = "right" />

--

(no, Manolito Gafotas era de Carabanchel Alto)

--

[**Un poco de CV**](https://scholar.google.es/citations?user=Wb3lxFIAAAAJ&hl=es): licenciatura de Matemáticas (UCM), máster en Ingeniería Matemática (UCM), Doctor en Estadística (UGR), Ayudante Doctor en UNIOVI y UCM

--

&nbsp;

### .fancy[**Divulgando cuando puedo**] 👇🏻

[`r fa(name = "twitter")` @dadosdelaplace](http://twitter.com/dadosdelaplace)  
[`r fa(name = "instagram")` @javieralvarezliebana](https://instagram.com/javieralvarezliebana)  
[`r fa(name = "paper-plane")` http://t.me/dadosdelaplace](t.me/dadosdelaplace)  
[`r fa(name = "github")` http://github.com/dadosdelaplace](http://github.com/dadosdelaplace) 

--


&nbsp;

**`Despacho`**: X, planta Y, Facultad de Estudios Estadísticos (UCM).

---
.right[Clase 1/28]
# ¿Cómo vamos a funcionar?

🗓 .saltinline[**Horario**]: lunes de 13:00 a 15:00; jueves de 11:00 a 13:00.  
🏫 .fatinline[**Tutorías**]: 12:00-13:00 lunes; 13:00-14:00 y 17:00-18:00 jueves.

--

&nbsp;

.heat[Campus virtual]

Lugar donde se subirán los **materiales docentes** y se hará la comunicación oficial del curso, así como la subida de calificaciones.

```{r campus, echo = FALSE}
knitr::include_graphics("./img/campus.jpg")
``` 

---
.right[Clase 1/28]
# ¿Cómo vamos a funcionar?

🗓 .saltinline[**Horario**]: lunes de 13:00 a 15:00; jueves de 11:00 a 13:00.  
🏫 .fatinline[**Tutorías**]: 12:00-13:00 lunes; 13:00-14:00 y 17:00-18:00 jueves.

&nbsp;

.heat[Telegram]

Usaremos un [canal de Telegram](t.me/exploracion_datos_2021_2022) como foro de la clase para la **comunicación del día a día** (si procede podemos hacer un grupo para preguntar dudas rápidas).

```{r telegram, echo = FALSE}
knitr::include_graphics("./img/telegram.jpg")
``` 

---

.right[Clase 1/28]
# ¿Cómo vamos a funcionar?

🗓 .saltinline[**Horario**]: lunes de 13:00 a 15:00; jueves de 11:00 a 13:00.  
🏫 .fatinline[**Tutorías**]: 12:00-13:00 lunes; 13:00-14:00 y 17:00-18:00 jueves.

&nbsp;

.heat[Software: R]

El software que usaremos durante todo el curso será [R](https://cran.r-project.org/), un **software estadístico gratuito y de código libre**, que nos permitirá implentar en la práctica los conocimientos teóricos.

```{r R, echo = FALSE}
knitr::include_graphics("./img/cran_R.jpg")
``` 

---
.right[Clase 1/28]
# ¿Cómo vamos a funcionar?

🗓 .saltinline[**Horario**]: lunes de 13:00 a 15:00; jueves de 11:00 a 13:00.  
🏫 .fatinline[**Tutorías**]: 12:00-13:00 lunes; 13:00-14:00 y 17:00-18:00 jueves.

&nbsp;

.heat[GitHub]

Todos los **códigos R y Rmarkdown** (así como los códigos de estas diapositivas) estarán subidos en el [repositorio de GitHub](github.com/dadosdelaplace/docencia).

```{r github, echo = FALSE}
knitr::include_graphics("./img/github.jpg")
```

---
.right[Clase 1/28]
# ¿Cómo vamos a funcionar?

🗓 .saltinline[**Horario**]: lunes de 13:00 a 15:00; jueves de 11:00 a 13:00.  
🏫 .fatinline[**Tutorías**]: 12:00-13:00 lunes; 13:00-14:00 y 17:00-18:00 jueves.

&nbsp;

&nbsp;

.heat[EVALUACIÓN]

- La **asistencia no será obligatoria**, aunque la participación en clase si contará en positivo en la evaluación continua

- .saltinline[**Evaluación continua**]: participación en clase y trabajo realizado durante el curso (problemas y posibles entregas de prácticas).

- .saltinline[**Nota final**]: se ponderará un **35% la evaluación continua** y un **65% la calificación de un examen final**. La nota final será el **máximo entre esta ponderación y dicho examen**. Ejemplos: continua 9/10 + examen final 5/10 = nota final 6.4/10; continua 5/10 + examen final 1/10 = nota final 5/10 (ponderación 3.6/10 pero 5/10 en la prueba final).

---
class: inverse, center, middle

# APRENDIENDO A <br> .fat[PROGRAMAR EN R]


---

class: inverse, center, middle

# ¿CUÁLES SON LAS VENTAJAS DEL <br> .acid[SOFTWARE LIBRE?]


---
.right[Clase 1/28]
# Introducción a `R`

## ¿Qué es `R`?

`R` es un **lenguaje de programación** (https://cran.r-project.org/) especialmente pensado para el **análisis estadístico** (pero de proposito general)

* .saltinline[**Gratis**]
* .saltinline[**Software libre**]: no solo es gratis sino que su código se puede ver y modificar (e **incorporar código de otras personas**, INCLUSO de otros lenguajes).
* **Modular**: instalas lo que necesitas (hola, Matlab).
* **Soporte infinito**: tiene una inmensa comunidad de usuarios.
--

## ¿Qué NO es `R`?

⛔️ .heatinline[**NO**] requiere una curva de aprendizaje elevada (sí C++ o Fortran).  
⛔️ .heatinline[**NO**] es un lenguaje especialmente rápido en la ejecución (sí C++ o Fortran).  
⛔️ .heatinline[**NO**] es una base de datos

---
.right[Clase 1/28]
# Introducción a `R`

El **aprendizaje de `R`** irá pegado a los contenidos teóricos y ejercicios del curso, en lugar de darnos un atracón final de programación sin relación con el mundo real.

--

⛔️ .saltinline[**NO TE AGOBIES**] ni te obsesiones con aprender cada comando o función: tienes un manual y un invento llamado internet a tu disposición.

--

⏳.saltinline[**NO LO DEJES PARA EL FINAL**]:  pregunta las dudas en el momento que necesites.

--

🗓 Normalmente los .fatinline[**lunes**] los dedicaremos a los **conceptos teóricos** y los .fatinline[**jueves**] a realizar ejercicios y programación en `R` (y alguna entrega 😈).

--

## Manual de programación alojado en `GitHub` 

Todo lo relacionado con `R` lo seguiremos a través del manual alojado en [GitHub](https://github.com/dadosdelaplace/cursoR_intro_2021_2022) y disponible actualizado en https://aprendiendo-r-intro.netlify.app/

---

class: inverse, center, middle

# Tema 1 <br> .fat[estadística...WTF?]

---

class: inverse, center, middle

# ¿CÓMO DEFINIRÍAS <br> .acid[LA ESTADÍSTICA?]

---
.right[Clase 2/28]
# .saltinline[Tema 1: estadística...WTF?]

.pull-left[
## Objetivos:
* ¿Qué es la estadística?
* Un poquito de historia
* Conceptos básicos: muestra, caracteres, modalidades y variables]

.pull-right[
```{r echo = FALSE, out.width = "75%", fig.align = "center"}
knitr::include_graphics("./img/meme_stats.jpg")
```
]

---
.right[Clase 2/28]
# .fat[¿Qué es la estadística?]

## Según la RAE:

1. f. Estudio de los datos cuantitativos de la población, de los recursos naturales e industriales, del tráfico o de cualquier otra manifestación de las sociedades humanas.

2. f. Rama de la matemática que utiliza grandes conjuntos de datos numéricos para obtener inferencias basadas en el cálculo de probabilidades.

---
.right[Clase 2/28]
# .fat[¿Qué es la estadística?]

## Según Stanford<sup>1</sup>:

Disciplina encargada del estudio, la recolección, la organización, el análisis, la interpretación Y .saltinline[**LA PRESENTACIÓN**] de los datos.

.footnote[[1] [Stanford Encyclopedia of Philosophy](https://plato.stanford.edu/entries/statistics/)]

---

class: inverse, center, middle

# ¿CUÁLES FUERON LOS <br> .acid[PRIMEROS USOS] <br> DE LA ESTADÍSTICA?

---
.right[Clase 2/28]
# .salt[Historia de la estadística]

.pull-left[
* Del (neo)latín «statisticum collegium»: consejo de **Estado**.
* Del alemán «statistik» (ciencia del **Estado**, intoducido por G. Achenwall).

&nbsp;

&nbsp;

.heatinline[**Origen**]: una herramienta para la **administración** eficiente del Estado

]

.pull-right[
```{r echo = FALSE, out.width = "80%", fig.align = "center"}
knitr::include_graphics("./img/biblia.jpg")
```
]

---
.right[Clase 2/28]
## .saltinline[Primeros usos: elaboración de censos]

Los **primeros usos** documentados de la estadística fue la elaboración de censos por parte de **mesopotámicos, chinos y egipcios**, con el objetivo de llevar un **recuento de los recursos** (humanos y materiales), con tres fines:

* Cobrar **.saltinline[impuestos]**.
* Reparto de **tierras** y optimización de su uso.
* **Reclutamiento de soldados** en edad de merecer.

## .fatinline[Estadística en la guerra]

.pull-left[Según Tucídides, conceptos como **.fatinline[la moda]** datan del **siglo V a.C.**: para asaltar la muralla de la ciudad de Platea, ponían a contar a varios soldados el número de ladrillos vistos en la muralla, quedándose con el **conteo más repetido (la moda, el más frecuente)**, permitiendo el cálculo de la altura de la muralla.]

.pull-right[
```{r echo = FALSE, out.width = "70%", fig.align = "center"}
knitr::include_graphics("./img/peloponeso.jpg")
```
]

---
.right[Clase 2/28]
### .salt[¿Qué han hecho los romanos por nosotros?]

```{r include=FALSE}
options(htmltools.dir.version = FALSE)
```

<iframe width="900" height="400" src="https://www.youtube.com/embed/WYU5SAQwc4I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

---
.right[Clase 2/28]
### .salt[¿Qué han hecho los romanos por nosotros?]

Precisamente por el tamaño que adquirió su organización como Imperio, fueron los romanos quienes hicieron un uso más intenso de la estadística:

* .fatinline[**Censos**] (elaborados por la censura, que elaboraba no solo el censo sino la supervisión de la moralidad pública).
* Primeras .heatinline[**tablas de natalidad/mortalidad**]
* Primeros .acidinline[**catastros**] (registros oficiales de propiedades, creando los primeros impuestos a la vivienda a nobles y terratenientes, en función de su características)

```{r echo = FALSE, out.width = "50%", fig.align = "center"}
knitr::include_graphics("./img/catastro.jpg")
```

---
.right[Clase 2/28]

.pull-left[
.fat[**ÁRABES**]

Autores de los **primeros tratados de estadística**, como el manuscrito de **Al-Kindi (801-873)**, que usó la distribución de **frecuencias de palabras** para el desarrollo de métodos de cifrado y descifrado de **mensajes encriptados**.]

--

.pull-right[.fat[**MÉXICO**]

Ya en el **año 1116, el rey Xólotl** implementó un **censo** que consistía en la **estimación de piedras**, tirando cada súbdito una a un montón (Nepohualco).
]


--

&nbsp;

&nbsp;

.pull-left[.salt[**INGLATERRA**]

Desde el siglo XII se realiza la **Prueba del Pyx**, considerado uno de los **primeros controles de calidad**: se extre una de las monedas acuñadas y se deposita en una caja, para un año después comprobar su calidad y pureza.
]

--
.pull-right[
.salt[**ITALIA**]

En paralelo al **auge de los primeros «sistemas financieros» en Italia**, «La Nuova Crónica» de G. Villani fue considerado durante mucho tiempo el primer tratado de estadística (hasta el descubrimiento de los trabajos de Al-Kindi).
]

---
.right[Clase 2/28]

# Navegación y astronomía


.pull-left[
#### .salt[T. Brahe]

Uno de los primeros usos «modernos» y sistemáticos de la estadística fue en la **navegación y la astronomía**, siendo Tycho Brahe de los primeros en utilizar la estadística para **reducir los errores** observacionales, empezando a usar conceptos como la **media**.
]

.pull-right[

#### .fat[E. Wright]

Fue el primero en usar en 1599 lo que hoy llamamos **mediana** en su libro «Certaine errors in navigation», usada para localizar el valor correcto más probable de una serie de observaciones.

]

.pull-left[

#### .fat[G. Galileo]

Aunque la fama se la llevó **Gauss**, fue el primero en plantear una idea similar a la que hoy llamamos **método de mínimos cuadrados**: los valores más probables serían aquellos que minimizaran los errores. Su trabajo de **teoría de errores** fue luego sistematizado por **Roger Cotes** («Opera Miscellanea», 1750).

]

.pull-right[
#### .salt[C. F. Gauss y A. M. Legendre]

El **método de los mínimos cuadrados**, en el que basan modelos actuales como la regresión, fue desarrollado por **Legendre y Gauss** (el último lo aplicó a la detección más probable del planeta enano Ceres), aunque no fue hasta **Bessel (1815)** cuando se introdujo el concepto de **desviación media**.

]

[📌🧶 Hilo sobre la historia de la regresión y del método de mínimos cuadrados](https://twitter.com/DadosdeLaplace/status/1317766004466978817)


---

.right[Clase 2/28]
# Demografía, epidemiología y fisiología

.pull-left[

#### .fat[J. Graunt]

Autor de «Natural and Political Observations Made upon the Bills of Mortality» (1662), uno de los primeros trabajos en los que ya se hablaba de **exceso de mortalidad** a partir de las primeras tablas de natalidad y mortalidad, y fue de los primeros en aplicar algo similar al **«muestreo»** para **estimar la población de Londres**.
]

.pull-right[

#### .salt[G. Neumann]

Las **fakes news** ya existían en el siglo XVII: Gaspar Neumann también un precursor en el **análisis estadístico de tablas de mortalidad**, para desmentir bulos (ejemplo: desmontó la creencia de que en los años acabados en siete morían más personas.
]


.pull-left[

#### .salt[J. Snow]

Se le considera pionero de la **epimdemiología moderna** y la **estadística espacial**: aunque los **diagramas de Voronoi** tardarían años en ser formalizados, John Snow aplicó ya la distancia de los datos a los centros para mitigar la **epidemia de cólera en Londres** a mediados del siglo XIX.

]

.pull-right[

#### .fat[F. Galton]

Primo de Charles Darwin, inventor de los **silbatos para perretes**, de los mapas meteorológicos y la persona que acuñó el concepto de **regresión** para el análisis de la estatura a lo largo de los miembros de una familia.

]



[📚 «El mapa fantasma», Steven Johnson, sobre la historia de John Snow](https://capitanswing.com/libros/el-mapa-fantasma/)

---
.right[Clase 2/28]
### .salt[Probabilidad]

No fue hasta el auge de la **probabilidad** (con **Pascal, Laplace, los Bernoulli, de Moivre y Gauss**) cuando se empezaron a desarrollar los primeros métodos formales en estadística, con el objetivo ya no solo de describir sino de **inferir conclusiones estadísticamente significativas**.


### .fat[Bioestadística]
Con los nuevos métodos de inferencia estadística que empezaban a surgir, y la **producción de datos** cada vez mayor, a finales del siglo XIX y principios del siglo XX la **bioestadística** supuso la explosión definitiva de la estadística.

### .acid[Encuestas y muestreo]
La complejidad de los análisis demográficos, políticos y sociológicos ha devuelto a la utilidad pública y estatal el protagonismo que tuvo, poniendo especial enfásis en cómo es la recogida y procesamiento de la información.

---

class: inverse, center, middle

# EMPECEMOS... <br> .acid[CONCEPTOS BÁSICOS]

### .fancy[Población vs Muestra - Variables - Modalidades - Cuanti vs Cuali]


---
.right[Clase 2/28]
### .salt[Población, individuo y muestra]

.panelset[
.panel[.panel-name[Población]

.pull-left[
```{r poblacion}
set.seed(1234567) #<<
# Creamos tabla dummy
tabla <-
  data.frame("nombres" = glue("nombre_{1:100}"),
             "casado" = rep(c(TRUE, FALSE), 50),
             "estudios" = rep(c("primaria",
                                "ESO", "bach", "uni"), 25),
             "estatura" = rnorm(100, mean = 170,
                                sd = 0.25),
             "hermanos" = rep(0:4, 20))
head(tabla) #<<
```
]

.pull-right[Muchos de los nombres y conceptos de la estadística hacen referencia a su uso primigenio: **los censos de población**

* .fatinline[**Población**]: en su momento era el **colectivo de individuos** a estudiar (por ejemplo, 47 millones de españoles), pero llamaremos población al **conjunto de posibles elementos o eventos**  de los que podríamos tener observaciones. 

* .heatinline[**Ejemplo con `R`**]: la tabla entera de 100 posibles individuos a medir.

* .acidinline[**Problema**]: normalmente es **inaccesible** poder observar a la totalidad del conjunto teórico (es imposible medir al conjunto de la población española).
]
]

.panel[.panel-name[Individuo]

.pull-left[
```{r individuo}
# Número de individuos en la población
n_individuos <- nrow(tabla)

# Mensaje con el número
cat(glue("Hay {n_individuos} individuos"))

# Accedemos al primero y al décimo
tabla[1, ] #<<
tabla[10, ] #<<
```
]

.pull-right[

* .fatinline[**Individuo**]: cada uno de los **elementos simples** de nuestra población, cada elemento sobre el que vamos a **medir una característica** (cada una de las personas de España).

* .heatinline[**Ejemplo con `R`**]: normalmente los individuos son cada una de las filas de una tabla o base de datos (podría estar al revés, pero **el esquema habitual es una fila por individuo, una columna por característica**).

* .acidinline[**Aleatoriedad**]: un **experimento aleatorio** es aquel cuyo resultado inmediato, para cada individuo, no es posible de saber con certeza, aunque eso no impida definir y conocer su patrón a **nivel poblacional (teórico)**. No sabemos que saldrá en el dado cada vez que lo tiramos pero sabemos la probabilidad de que salga 1 en cada tirada.

]

]

.panel[.panel-name[Muestra]

.pull-left[
```{r muestra}
# Generamos aleatoriamente 6 índices de filas 
set.seed(1234567) #<<
filas <- # replace = FALSE (por defecto), para no repetir filas
  sample(x = 1:n_individuos, size = 6)
tabla[filas, ] #<<
```
]

.pull-right[

* .fatinline[**Muestra**]: **selección representativa** de la población, subconjunto que **capture una información lo más similar** posible a la de la población total (teórica).

* .acidinline[**Tamaño muestral**]: número de individuos seleccionados, denotado como $n$.

* .heatinline[**Ejemplo con `R`**]: seleccionar un número de filas de la tabla total. El **tamaño muestral** será el **tamaño de la tabla** con la que vamos a trabajar (el número de filas)

]


.heatinline[**Importante**]: normalmente en `R` la tabla que nos llega ya en sí la muestra de una población más grande, y no es necesario aplicar técnicas de muestreo (sí de filtrado y depuración).
]

.panel[.panel-name[Ejemplos de muestreo]

.pull-left[
```{r}
set.seed(1234567) #<<
library(SamplingUtil) # instalar en devtools::install_github("DFJL/SamplingUtil")

# Aleatorio sistemático
idx <- sys.sample(n_individuos, n = 5) #<<
idx
tabla[idx, ]
``` 
]

.pull-right[

* .fatinline[**Aleatorio simple**]: individuos seleccionados **totalmente al azar** (no garantiza representatividad).

* .fatinline[**Aleatorio sistemático**]: una vez elegido un individuo al azar de la población (tamaño $N$), los siguientes se seleccionan de forma **sistemática** cada $k = N / n$ valores, donde $n$ es el tamaño de la muestra deseada. Ejemplo: si $N=150$ y $n=45$, se seleccionarán cada $k=150/45 \simeq 3$ valores a partir del primero. Este sistema ignora posibles **sesgo de ordenación**.

* .fatinline[**Muestreo aleatorio estratificado**]: se divide a la población en **estratos** (subgrupos o subpoblaciones), lo más diferenciados entre sí pero lo más parecidos internamente respecto a la característica a medir.
]
]
]

---
.right[Clase 2/28]

### .fat[Características y modalidades]

.panelset[
.panel[.panel-name[Variables]
.pull-left[
```{r}
head(tabla)

# Características medidas (nombre de columnas)
colnames(tabla) #<<
```
]

.pull-right[

### .salt[**Caracteres**]

Cada una de las variables o **columnas de una tabla**, cada una de las **características o cualidades que se miden/estudian** para cada uno de los individuos seleccionados en la muestra.
]
]


.panel[.panel-name[Modalidades]
.pull-left[

```{r}
# Modalidades de la variable casado
unique(tabla$casado) #<<

# Modalidades de la variable estudios
unique(tabla$estudios) #<<
```
]

.pull-right[

### .salt[**Modalidades**]

Llamaremos modalidades a los **diferentes valores que puede adoptar** una característica o variable. En el caso de `estado` solo podrá tomar los valores `TRUE` y `FALSE`, pero la estatura es una variable continua: su modalidad es son todos los números reales positivos hasta una altura máxima.
]
]

.panel[.panel-name[Variables cuantitativas]
.pull-left[

```{r}
# Variable discreta
tabla$hermanos[1:10] #<<

# Variable discreta (no depende de que tengan o no decimales)
tabla$hermanos[1:10] / 7 #<<

# Variable continua
tabla$estatura[1:10] #<<
``` 

]

.pull-right[
### .fat[Cuantitativas]

Variables **cuantificables**, representan una **cantidad numérica** medible (personas, estaturas, edades, etc).

* .saltinline[**Discretas**]: se pueden **contar** y **enumerar (aunque sean infinitos)**, detrás de un valor puedo saber cuál viene después (personas, granos de arena, etc).

* .acidinline[**Continuas**]: no solo toman infinitos valores sino que entre dos valores cualesquiera, también hay infinitos términos, no se puede determinar el siguiente valor (estaturas, pesos, temperatura, etc).

]
]

.panel[.panel-name[Variables cualitativas]
.pull-left[

```{r}
# Variable nominal (lógica en este caso)
tabla$casado[1:10] #<<

# Variable nominal (cadena de texto)
tabla$nombres[1:10]#<<

# Variable ordinal
tabla$estudios[1:10] #<<


``` 

]

.pull-right[
### .fat[Cualitativas]

Variables que representan **cualidades (CATEGORÍAS)** (estado civil, sexo, religión, nivel de estudios, etc).

* .saltinline[**Ordinales**]: cualidades que **admiten una ordenación, tienen definida una jerarquía** (suspenso-aprobado-notable, sano-leve-grave-muerto).

* .acidinline[**Nominales**]: representan cualidades que **no tienen (no deberían) asociada una jerarquía** (hombre-mujer, rojo-azul-amarillo, ateo-católico-musulmán-budista).

]
]
]

---
class: inverse, center, middle

.salt[MUESTRA   ➡️   ] .acid[HIPÓTESIS   ➡️   ] .fat[CONCLUSIONES]

### .fancy[.saltinline[**descriptiva** (realidad)]] - .fancy[.acidinline[**probabilidad**]] - .fancy[.fatinline[**inferencia** (realidad vs hipótesis)]]
---

class: inverse, center, middle

# Tema 2 <br> .fat[DESCRIPTIVA UNIDIMENSIONAL]

### .fancy[Frecuencias unidimensionales - Medidas de centralización, dispersión, posición y forma - Diagramas diferencial e integral - Momentos - Dataviz (tallos y hojas + caja)]


---

.right[Clase 3/28]



---


class: inverse, center, middle

# Tema 3 <br> .fat[DESCRIPTIVA BIDIMENSIONAL]

### .fancy[Frecuencias bidimensionales - Tablas de doble entrada - Marginal vs condicionada - Independencia - Momentos - Dataviz]

---

class: inverse, center, middle

# Tema 4 <br> .fat[MODELOS PREDICTIVOS]

### .fancy[Regresión lineal y correlación - Coeficiente Sperman y Kendall - Introducción a lo multivariante - Regresión logística - Introducción a los GLM]

---


class: inverse, center, middle

# Tema 5 <br> .fat[PROBABILIDAD (INTRODUCCIÓN)]

### .fancy[Enfoque frecuentista - Enfoque axiomático - Sucesos y espacios de probabilidad - Teorema de la probabilidad condicionada - Teorema de la probabilidad total - Teorema de Bayes]

---

.heat[**Recursos usados para las diapositivas**]

* [Paquete `{tidyverse}`](https://www.tidyverse.org/): conjunto de paquetes para la **depuración**, análisis y **visualización** de datos.

* [Paquete `{purrr}`](https://purrr.tidyverse.org/): paquete para la **programación funcional con listas**.

* [Paquete `{SamplingUtil}`](https://rpubs.com/Felipe1986/MuestreoTutorialR): paquete para la simulación de distintos **tipos de muestreos**.

* [Paquete `{rmarkdown}`](https://rmarkdown.rstudio.com/): paquete para **contar una historia** con tus datos (documentos, informes, paneles, presentaciones, libros, etc).

* [Paquete `{knitr}`](https://yihui.org/knitr/): paquete para la elaboración flexible y rápida de **informes** y documentos con `R`.

* [Paquete `{fontawesome}`](https://www.ctan.org/pkg/fontawesome): paquete para el uso de **fuentes y emojis**.

* [Paquete `{xaringan}`](https://slides.yihui.org/xaringan/#6): paquete para elaborar **diapositivas** uniendo {`rmarkdown`} y **javascript**.

* [Meet `{xaringan}` (de Alison Hill)](https://arm.rbind.io/slides/xaringan.html#1): tips para presentaciones en `{xaringan}`.

* [Paquete `{xaringanExtra}`](https://pkg.garrickadenbuie.com/xaringanExtra/#/?id=xaringanextra): paquete para algunas **extensiones** en la elaboración de diapositivas con `{xaringan}` (paneles, destacar líneas de código, etc)

---

.salt[**Recursos generales en redes**]
  - [Paquete `{tidyverse}`](https://www.tidyverse.org/): web oficial y documentación.
  - [Epidemiología en `R`](https://epirhandbook.com/index.html).
  - [Anabel Forte](https://twitter.com/AnaBayes): estadística y divulgadora, e investigadora de la Universidad de Valencia.
  - [Picanúmeros](https://twitter.com/Picanumeros): divulgador e investigador de la Universidad de Granada).
  - [RLangPackage](https://twitter.com/RLangPackage): un postean en Twitter un paquete al día.
  - [R posts you might have missed!](https://twitter.com/icymi_r): postean en Twitter recursos de todo tipo para el análisis estadístico en R.
  - [Mine Çetinkaya-Rundel](https://twitter.com/minebocek): estadística y experta en `R` (trabajando en `R Studio`).
  - [Alison Hill](https://twitter.com/apreshill): científica de datos y desarrolladora de múltiples paquetes.
  - [Hadley Wickham](https://twitter.com/hadleywickham): Chief Scientist en `R Studio` y desarrollador del entorno de paquetes `{tidyverse}`.
  - [Grupo de Telegram](https://t.me/hispanoverse) y [canal de Discord](https://discord.gg/7ueKQqeaGr) de la comunidad de R hispano.
  
.fat[**Dataviz**]
  - [Paquetes `{ggplot2}`](https://r4ds.had.co.nz/data-visualisation.html) y [`{plotly}`](https://plotly.com/r/)
  - [Expertos en visualización de datos](https://twitter.com/i/lists/1324478481338683392): cuenta de usuarios de Twitter expertos en dataviz.
  - [Visualización de predicciones](https://www.fharrell.com/post/addvalue/).
  - [Proyecto #tidytuesday](https://github.com/rfordatascience/tidytuesday): desafío semanal para el aprendizaje en comunidad ([cuenta de Twitter](https://twitter.com/r4dscommunity)).
  - [Cédric Scherer](https://t.co/2jRS9ovubO?amp=1): ecólogo y especialista en visualización de datos con `{ggplot2}`.
  - [Dominic Royé](https://twitter.com/dr_xeo): experto en visualización de datos geográficos.
  - [Paula Casado (El arte del dato)](https://twitter.com/elartedeldato): cuenta de Twitter especializada en dataviz.
  - [Michela Lazzaroni](https://twitter.com/michelaz988): editora, diseñadora y experta en visualización de datos.
  - [Gráficos BBC](https://bbc.github.io/rcookbook/#how_to_create_bbc_style_graphics): generar gráficos en `R` con el estilo de las infografías de la BBC.
  - [Mapas en `R`](geocompr.robinlovelace.net (https://geocompr.robinlovelace.net/adv-map.html) y [geocomputación](https://geocompr.github.io/).
  - [Paquete `{spiralize}`](https://jokergoo.github.io/spiralize_vignettes/spiralize.html): visualizar datos en formato de espiral.

---

.fat[**Presentación de resultados**:]
  - [Paquete `{bookdown}`](https://bookdown.org/yihui/bookdown/): generación en `R` de informes y libros, mezclando fórmulas matemáticas, texto plano, código `R` y gráficas.
  - [Paquete `{xaringan}`](https://slides.yihui.org/xaringan/#1): generar diapositivas desde `R`.
  - [Presentación de tablas estéticamente](https://rfortherestofus.com/2019/11/how-to-make-beautiful-tables-in-r/): paquetes `{gt}`, `{kable}`, `{DT}`, `{formattable}`, `{reactable}`, `{flextable}`.
  - [Paquete `{shiny}`](https://shiny.rstudio.com/): creación  de webs interactivas.
  
.salt[**Inferencia y ciencia de datos**]
  - [Inferencia estadística en `R`](https://moderndive.com/8-confidence-intervals.html).
  - [Women in Statistics and Data Science](https://twitter.com/WomenInStat?t=6HSzYGrrX44yv9C_XuCddA&s=09): cuenta de Twitter para visibilizar el trabajo de mujeres en la estadística y la ciencia de datos.
  - [Paquete de `{tidytext}`](https://www.tidytextmining.com/sentiment.html): para **analizar textos (data mining)** y «análisis de sentimientos» de los mismos.
  - [Curso en Datacamp de text mining](https://www.datacamp.com/tracks/text-mining-with-r)
  - [Ciencia de datos en `R`](https://bookdown.org/dparedesi/data-science-con-r/).
  
.fat[**Gestionar versiones**:]
  - [GitHub en `R Studio`](https://comunidadbioinfo.github.io/cdsb2020/gitIntro/GitHubIntro.html#1)
  - [Git en `R`](https://happygitwithr.com/rstudio-git-github.html)
  
---

# Hello World

Install the **xaringan** package from [Github](https://github.com/yihui/xaringan):

```{r eval=FALSE, tidy=FALSE}
remotes::install_github("yihui/xaringan")
```

--

You are recommended to use the [RStudio IDE](https://www.rstudio.com/products/rstudio/), but you do not have to.

- Create a new R Markdown document from the menu `File -> New File -> R Markdown -> From Template -> Ninja Presentation`;<sup>1</sup>

--

- Click the `Knit` button to compile it;

--

- or use the [RStudio Addin](https://rstudio.github.io/rstudioaddins/)<sup>2</sup> "Infinite Moon Reader" to live preview the slides (every time you update and save the Rmd document, the slides will be automatically reloaded in RStudio Viewer.

.footnote[
[1] 中文用户请看[这份教程](https://slides.yihui.org/xaringan/zh-CN.html)

[2] See [#2](https://github.com/yihui/xaringan/issues/2) if you do not see the template or addin in RStudio.
]

---
background-image: url(`r xaringan:::karl`)
background-position: 50% 50%
class: center, bottom, inverse

# You only live once!

---

# Hello Ninja

As a presentation ninja, you certainly should not be satisfied by the "Hello World" example. You need to understand more about two things:

1. The [remark.js](https://remarkjs.com) library;

1. The **xaringan** package;

Basically **xaringan** injected the chakra of R Markdown (minus Pandoc) into **remark.js**. The slides are rendered by remark.js in the web browser, and the Markdown source needed by remark.js is generated from R Markdown (**knitr**).

---

# remark.js

You can see an introduction of remark.js from [its homepage](https://remarkjs.com). You should read the [remark.js Wiki](https://github.com/gnab/remark/wiki) at least once to know how to

- create a new slide (Markdown syntax<sup>*</sup> and slide properties);

- format a slide (e.g. text alignment);

- configure the slideshow;

- and use the presentation (keyboard shortcuts).

It is important to be familiar with remark.js before you can understand the options in **xaringan**.

.footnote[[*] It is different with Pandoc's Markdown! It is limited but should be enough for presentation purposes. Come on... You do not need a slide for the Table of Contents! Well, the Markdown support in remark.js [may be improved](https://github.com/gnab/remark/issues/142) in the future.]

---
background-image: url(`r xaringan:::karl`)
background-size: cover
class: center, bottom, inverse

# I was so happy to have discovered remark.js!

---
class: inverse, middle, center

# Using xaringan

---

# xaringan

Provides an R Markdown output format `xaringan::moon_reader` as a wrapper for remark.js, and you can use it in the YAML metadata, e.g.

```yaml
---
title: "A Cool Presentation"
output:
  xaringan::moon_reader:
    yolo: true
    nature:
      autoplay: 30000
---
```

See the help page `?xaringan::moon_reader` for all possible options that you can use.

---

# remark.js vs xaringan

Some differences between using remark.js (left) and using **xaringan** (right):

.pull-left[
1. Start with a boilerplate HTML file;

1. Plain Markdown;

1. Write JavaScript to autoplay slides;

1. Manually configure MathJax;

1. Highlight code with `*`;

1. Edit Markdown source and refresh browser to see updated slides;
]

.pull-right[
1. Start with an R Markdown document;

1. R Markdown (can embed R/other code chunks);

1. Provide an option `autoplay`;

1. MathJax just works;<sup>*</sup>

1. Highlight code with `{{}}`;

1. The RStudio addin "Infinite Moon Reader" automatically refreshes slides on changes;
]

.footnote[[*] Not really. See next page.]

---

# Math Expressions

You can write LaTeX math expressions inside a pair of dollar signs, e.g. &#36;\alpha+\beta$ renders $\alpha+\beta$. You can use the display style with double dollar signs:

```
$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$
```

$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$

Limitations:

1. The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

1. There should not be spaces after the opening `$` or before the closing `$`.

1. Math does not work on the title slide (see [#61](https://github.com/yihui/xaringan/issues/61) for a workaround).

---

# R Code

```{r comment='#'}
# a boring regression
fit = lm(dist ~ 1 + speed, data = cars)
coef(summary(fit))
dojutsu = c('地爆天星', '天照', '加具土命', '神威', '須佐能乎', '無限月読')
grep('天', dojutsu, value = TRUE)
```

---

# R Plots

```{r cars, fig.height=4, dev='svg'}
par(mar = c(4, 4, 1, .1))
plot(cars, pch = 19, col = 'darkgray', las = 1)
abline(fit, lwd = 2)
```

---

# Tables

If you want to generate a table, make sure it is in the HTML format (instead of Markdown or other formats), e.g.,

```{r}
knitr::kable(head(iris), format = 'html')
```

---

# HTML Widgets

I have not thoroughly tested HTML widgets against **xaringan**. Some may work well, and some may not. It is a little tricky.

Similarly, the Shiny mode (`runtime: shiny`) does not work. I might get these issues fixed in the future, but these are not of high priority to me. I never turn my presentation into a Shiny app. When I need to demonstrate more complicated examples, I just launch them separately. It is convenient to share slides with other people when they are plain HTML/JS applications.

See the next page for two HTML widgets.

---

```{r out.width='100%', fig.height=6, eval=require('leaflet')}
library(leaflet)
leaflet() %>% addTiles() %>% setView(-93.65, 42.0285, zoom = 17)
```

---

```{r eval=require('DT'), tidy=FALSE}
DT::datatable(
  head(iris, 10),
  fillContainer = FALSE, options = list(pageLength = 8)
)
```

---

# Some Tips

- Do not forget to try the `yolo` option of `xaringan::moon_reader`.

    ```yaml
    output:
      xaringan::moon_reader:
        yolo: true
    ```

---

# Some Tips

- Slides can be automatically played if you set the `autoplay` option under `nature`, e.g. go to the next slide every 30 seconds in a lightning talk:

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          autoplay: 30000
    ```

- If you want to restart the play after it reaches the last slide, you may set the sub-option `loop` to TRUE, e.g.,

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          autoplay:
            interval: 30000
            loop: true
    ```

---

# Some Tips

- A countdown timer can be added to every page of the slides using the `countdown` option under `nature`, e.g. if you want to spend one minute on every page when you give the talk, you can set:

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          countdown: 60000
    ```

    Then you will see a timer counting down from `01:00`, to `00:59`, `00:58`, ... When the time is out, the timer will continue but the time turns red.
    
---

# Some Tips

- The title slide is created automatically by **xaringan**, but it is just another remark.js slide added before your other slides.

    The title slide is set to `class: center, middle, inverse, title-slide` by default. You can change the classes applied to the title slide with the `titleSlideClass` option of `nature` (`title-slide` is always applied).

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          titleSlideClass: [top, left, inverse]
    ```
    
--

- If you'd like to create your own title slide, disable **xaringan**'s title slide with the `seal = FALSE` option of `moon_reader`.

    ```yaml
    output:
      xaringan::moon_reader:
        seal: false
    ```

---

# Some Tips

- There are several ways to build incremental slides. See [this presentation](https://slides.yihui.org/xaringan/incremental.html) for examples.

- The option `highlightLines: true` of `nature` will highlight code lines that start with `*`, or are wrapped in `{{ }}`, or have trailing comments `#<<`;

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          highlightLines: true
    ```

    See examples on the next page.

---

# Some Tips


.pull-left[
An example using a leading `*`:

    ```r
    if (TRUE) {
    ** message("Very important!")
    }
    ```
Output:
```r
if (TRUE) {
* message("Very important!")
}
```

This is invalid R code, so it is a plain fenced code block that is not executed.
]

.pull-right[
An example using `{{}}`:

````
`r ''````{r tidy=FALSE}
if (TRUE) {
*{{ message("Very important!") }}
}
```
````
Output:
```{r tidy=FALSE}
if (TRUE) {
{{ message("Very important!") }}
}
```

It is valid R code so you can run it. Note that `{{}}` can wrap an R expression of multiple lines.
]

---

# Some Tips

An example of using the trailing comment `#<<` to highlight lines:

````markdown
`r ''````{r tidy=FALSE}
library(ggplot2)
ggplot(mtcars) + 
  aes(mpg, disp) + 
  geom_point() +   #<<
  geom_smooth()    #<<
```
````

Output:

```{r tidy=FALSE, eval=FALSE}
library(ggplot2)
ggplot(mtcars) + 
  aes(mpg, disp) + 
  geom_point() +   #<<
  geom_smooth()    #<<
```

---

# Some Tips

When you enable line-highlighting, you can also use the chunk option `highlight.output` to highlight specific lines of the text output from a code chunk. For example, `highlight.output = TRUE` means highlighting all lines, and `highlight.output = c(1, 3)` means highlighting the first and third line.

````md
`r ''````{r, highlight.output=c(1, 3)}
head(iris)
```
````

```{r, highlight.output=c(1, 3), echo=FALSE}
head(iris)
```

Question: what does `highlight.output = c(TRUE, FALSE)` mean? (Hint: think about R's recycling of vectors)

---

# Some Tips

- To make slides work offline, you need to download a copy of remark.js in advance, because **xaringan** uses the online version by default (see the help page `?xaringan::moon_reader`).

- You can use `xaringan::summon_remark()` to download the latest or a specified version of remark.js. By default, it is downloaded to `libs/remark-latest.min.js`.

- Then change the `chakra` option in YAML to point to this file, e.g.

    ```yaml
    output:
      xaringan::moon_reader:
        chakra: libs/remark-latest.min.js
    ```

- If you used Google fonts in slides (the default theme uses _Yanone Kaffeesatz_, _Droid Serif_, and _Source Code Pro_), they won't work offline unless you download or install them locally. The Heroku app [google-webfonts-helper](https://google-webfonts-helper.herokuapp.com/fonts) can help you download fonts and generate the necessary CSS.

---

# Macros

- remark.js [allows users to define custom macros](https://github.com/yihui/xaringan/issues/80) (JS functions) that can be applied to Markdown text using the syntax `![:macroName arg1, arg2, ...]` or `![:macroName arg1, arg2, ...](this)`. For example, before remark.js initializes the slides, you can define a macro named `scale`:

    ```js
    remark.macros.scale = function (percentage) {
      var url = this;
      return '<img src="' + url + '" style="width: ' + percentage + '" />';
    };
    ```

    Then the Markdown text

    ```markdown
    ![:scale 50%](image.jpg)
    ```

    will be translated to
    
    ```html
    <img src="image.jpg" style="width: 50%" />
    ```

---

# Macros (continued)

- To insert macros in **xaringan** slides, you can use the option `beforeInit` under the option `nature`, e.g.,

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          beforeInit: "macros.js"
    ```

    You save your remark.js macros in the file `macros.js`.

- The `beforeInit` option can be used to insert arbitrary JS code before `remark.create()`. Inserting macros is just one of its possible applications.

---

# CSS

Among all options in `xaringan::moon_reader`, the most challenging but perhaps also the most rewarding one is `css`, because it allows you to customize the appearance of your slides using any CSS rules or hacks you know.

You can see the default CSS file [here](https://github.com/yihui/xaringan/blob/master/inst/rmarkdown/templates/xaringan/resources/default.css). You can completely replace it with your own CSS files, or define new rules to override the default. See the help page `?xaringan::moon_reader` for more information.

---

# CSS

For example, suppose you want to change the font for code from the default "Source Code Pro" to "Ubuntu Mono". You can create a CSS file named, say, `ubuntu-mono.css`:

```css
@import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

.remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
```

Then set the `css` option in the YAML metadata:

```yaml
output:
  xaringan::moon_reader:
    css: ["default", "ubuntu-mono.css"]
```

Here I assume `ubuntu-mono.css` is under the same directory as your Rmd.

See [yihui/xaringan#83](https://github.com/yihui/xaringan/issues/83) for an example of using the [Fira Code](https://github.com/tonsky/FiraCode) font, which supports ligatures in program code.

---

# CSS (with Sass)

**xaringan** also supports Sass support via **rmarkdown**. Suppose you want to use the same color for different elements, e.g., first heading and bold text. You can create a `.scss` file, say `mytheme.scss`, using the [sass](https://sass-lang.com/) syntax with variables:

```scss
$mycolor: #ff0000; 
.remark-slide-content > h1 { color: $mycolor; }
.remark-slide-content strong { color: $mycolor; }
```

Then set the `css` option in the YAML metadata using this file placed under the same directory as your Rmd:

```yaml
output:
  xaringan::moon_reader:
    css: ["default", "mytheme.scss"]
```

This requires **rmarkdown** >= 2.8 and the [**sass**](https://rstudio.github.io/sass/) package. You can learn more about **rmarkdown** and **sass** support in [this blog post](https://blog.rstudio.com/2021/04/15/2021-spring-rmd-news/#sass-and-scss-support-for-html-based-output) and in [**sass** overview vignette](https://rstudio.github.io/sass/articles/sass.html).

---

# Themes

Don't want to learn CSS? Okay, you can use some user-contributed themes. A theme typically consists of two CSS files `foo.css` and `foo-fonts.css`, where `foo` is the theme name. Below are some existing themes:

```{r, R.options=list(width = 70)}
names(xaringan:::list_css())
```

---

# Themes

To use a theme, you can specify the `css` option as an array of CSS filenames (without the `.css` extensions), e.g.,

```yaml
output:
  xaringan::moon_reader:
    css: [default, metropolis, metropolis-fonts]
```

If you want to contribute a theme to **xaringan**, please read [this blog post](https://yihui.org/en/2017/10/xaringan-themes).


